<!DOCTYPE html>
<html lang="en" xmlns:th="www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>home</title>
    <div th:replace="/fragments/header.html :: header"></div>
</head>
<body>
    <div class="container">
        <div class="tab-content">
            <div class="tab-pane fade show active" id="home">
                지도
                <input id="i">
                <div id="map"style="width:100%;height:350px;"></div>
            </div>
            <div class="tab-pane fade" id="locker">
                물품보관소
            </div>
            <div class="tab-pane fade" id="myPage">
                마이페이지
                <form action="/logout" th:action="@{/logout}" method="post">
                    <input type="submit" value="Logout">
                </form>
            </div>
        </div>
    </div>

    <div th:replace="/fragments/nav.html :: nav"></div>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=8ca25e4282e787f4b61068e15c7afcb8"></script>
    <script th:inline="javascript">
        /*<![CDATA[*/
            $(document).ready(function(){
               $("#i").val(document.getElementById('i').val() + 1);
                 if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
              alert(position.coords.latitude + ' ' + position.coords.longitude);
            }, function(error) {
              console.error(error);
            }, {
              enableHighAccuracy: false,
              maximumAge: 0,
              timeout: Infinity
            });
            }
             else {
               alert('GPS를 지원하지 않습니다');
             }
             var mapContainer = document.getElementById('map'), // 지도를 표시할 div
                mapOption = {
                    center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
                    level: 3 // 지도의 확대 레벨
                };

            setInterval(map, 1000);



             });
                // 지도를 표시할 div와  지도 옵션으로  지도를 생성합니다
               function map() {

               var map = new kakao.maps.Map(mapContainer, mapOption);
               $("#i").val($("#i").val() + 1);
               }
    /*]]>*/
    </script>
</body>
</html>